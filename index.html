<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- Meta tags de seguranÃ§a -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline';
        style-src 'self' 'unsafe-inline';
        img-src 'self' data:;
        connect-src 'self' https://sua-api.com;
        frame-ancestors 'none';
        form-action 'self';
    ">
    <meta name="csrf-token" content="SEU_TOKEN_CSRF_AQUI"> <!-- Substitua pelo token real -->
    <title>KING - Loja Segura</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="user-controls">
            <div id="user-info" style="display: none;">
                <span id="username-display"></span>
                <button id="logout-btn">Sair</button>
                <button id="orders-btn">Meus Pedidos <span id="notification-badge" class="notification-badge">0</span></button>
                <button id="seller-panel-btn" style="display: none;">Painel do Vendedor</button>
            </div>
            <div id="login-section">
                <button id="login-btn">Login/Cadastro</button>
            </div>
        </div>
        <h1>KING</h1>
    </header>

    <main>
        <div class="products-grid">
            <!-- Produto 1 (Exemplo) - Os produtos serÃ£o carregados via API -->
            <div class="product-card">
                <img src="img/placeholder.jpg" alt="Carregando..." class="product-image">
                <div class="product-info">
                    <span class="product-price">R$00,00</span>
                    <h3 class="product-name">Carregando produto...</h3>
                    <div class="quantity-selector">
                        <button class="quantity-btn decrease-qty">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" disabled>
                        <button class="quantity-btn increase-qty">+</button>
                        <button class="bulk-qty" data-qty="10" disabled>+10</button>
                        <button class="bulk-qty" data-qty="100" disabled>+100</button>
                    </div>
                    <button class="add-to-cart" disabled>Carregando...</button>
                </div>
            </div>
            <!-- Os outros produtos serÃ£o gerados dinamicamente via JavaScript -->
        </div>
    </main>

    <!-- Modal de Login/Cadastro (mantido igual ao seu original, mas com inputs seguros) -->
    <div class="modal" id="auth-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="auth-tabs">
                <button class="tab-btn active" data-tab="login">Login</button>
                <button class="tab-btn" data-tab="register">Cadastro</button>
            </div>
            
            <div id="login-tab" class="auth-tab-content active">
                <form id="login-form">
                    <div class="form-group">
                        <label for="login-email">Email:</label>
                        <input type="email" id="login-email" required autocomplete="username">
                    </div>
                    <div class="form-group">
                        <label for="login-password">Senha:</label>
                        <input type="password" id="login-password" required autocomplete="current-password">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="seller-login"> Sou vendedor
                        </label>
                    </div>
                    <button type="submit" id="login-submit-btn">Entrar</button>
                </form>
            </div>
            
            <div id="register-tab" class="auth-tab-content">
                <form id="register-form">
                    <!-- Campos de cadastro com validaÃ§Ã£o -->
                    <div class="form-group">
                        <label for="register-name">Nome Completo:</label>
                        <input type="text" id="register-name" required maxlength="100">
                    </div>
                    <div class="form-group">
                        <label for="register-cpf">CPF:</label>
                        <input type="text" id="register-cpf" required pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" placeholder="000.000.000-00">
                    </div>
                    <!-- Outros campos do formulÃ¡rio... -->
                    <button type="submit" id="register-submit-btn">Cadastrar</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de Pedidos -->
    <div class="modal" id="orders-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Meus Pedidos</h2>
            <div id="orders-list"></div>
        </div>
    </div>

    <!-- Painel do Vendedor -->
    <div class="modal" id="seller-panel-modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Painel do Vendedor</h2>
            <div id="seller-orders-list"></div>
        </div>
    </div>

    <!-- Carrinho de Compras -->
    <div class="cart-sidebar">
        <div class="cart-header">
            <h2>Carrinho</h2>
            <button class="close-cart">&times;</button>
        </div>
        <div class="cart-items">
            <!-- Itens serÃ£o carregados dinamicamente -->
        </div>
        <div class="cart-summary">
            <div class="subtotal">
                <span>Subtotal:</span>
                <span class="subtotal-amount">R$0,00</span>
            </div>
            <div class="shipping">
                <span>Frete:</span>
                <span class="shipping-amount">GrÃ¡tis</span>
            </div>
            <div class="total">
                <span>Total:</span>
                <span class="total-amount">R$0,00</span>
            </div>
            <div class="min-order-message" style="color: red; display: none;">
                Pedido mÃ­nimo: R$300,00
            </div>
            <button class="checkout-btn" id="secure-checkout-btn">Finalizar Compra</button>
        </div>
    </div>
    <div class="cart-overlay"></div>

    <!-- BotÃ£o do Carrinho -->
    <button class="cart-btn" id="cart-button">
        <span class="cart-icon">ðŸ›’</span>
        <span class="cart-count">0</span>
    </button>

    <!-- Scripts (ORDEM IMPORTANTE) -->
    <script src="api.js"></script>
    <script src="script.js"></script>
</body>
</html>